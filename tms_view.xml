<openerp>
<data>

        <menuitem icon="terp-account" id="menu_tms" name="Freights" sequence="13"
            web_icon="images/logistics.png"
            web_icon_hover="images/logistics-hover.png"/>
        <menuitem id="menu_tms_travels" name="Freights" parent="menu_tms" sequence="10"/>            
        <menuitem id="menu_tms_config" name="Configuration" parent="menu_tms" sequence="99"/>
        <menuitem id="menu_tms_config_unit" name="Units" parent="menu_tms_config" sequence="2"/>
        <menuitem id="menu_tms_config_routes" name="Routes" parent="menu_tms_config" sequence="2"/>
        <menuitem id="menu_tms_config_waybill" name="Waybill" parent="menu_tms_config" sequence="2"/>

<!-- 
##############################
TMS.UNIT.CATEGORY 
##############################
-->
<!-- TREE View for tms.unit.category (Types, Brands, Models, Motor Type for Transportation Units) --> 
	<record model="ir.ui.view" id="view_tms_unit_category_tree">
        <field name="name">tms.unit.category.tree</field>
        <field name="model">tms.unit.category</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
            <tree string="Unit Master Data" colors="green:type in ('unit_type');blue:type in ('brand');black:type in ('model');red:type in ('extra_data');">
		   <!-- editable="bottom"> -->
                <field name="company_id" />
                <field name="name" />
		        <field name="complete_name" />
		        <field name="type"/>
                <field name="notes"/>
		    </tree>
		</field>
	</record>

<!-- FORM View for tms.unit.category (Types, Brands, Models, Motor Type for Transportation Units) -->
    
        <record id="view_tms_unit_category_form" model="ir.ui.view">
            <field name="name">tms.unit.category.form</field>
            <field name="model">tms.unit.category</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Unit Categories" version="7.0">
                    <sheet>
                        <h1>
                            <label string="Category"/>
                            <field name="name" class="oe_inline"/>
                        </h1>
					    <group col="4" colspan="4">
                            <field name="parent_id" />
                            <field name="type" select="1"/>
                            <field name="active" select="1"/>
<!--                            <field name="company_id" />-->
                            <field name="sequence" />
                            <field name="mandatory" attrs="{'invisible':[('type','!=','expiry')]}"/>
                            <newline/>
                            <group attrs="{'invisible':[('type','!=','motor')]}" colspan="2">
                                <field name="fuel_efficiency_drive_unit"/>
                                <newline/>
                                <field name="fuel_efficiency_1trailer"/>
                                <newline/>
                                <field name="fuel_efficiency_2trailer"/>
                            </group>
                            <newline/>
                            <field name="notes" colspan="4"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

<!-- Action for tms.unit.category (Types, Brands, Models, Motor Type for Transportation Units) -->
    <record model="ir.actions.act_window" id="open_view_tms_unit_category_form">
        <field name="name">TMS Unit Categories</field>
        <field name="res_model">tms.unit.category</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Menu for tms.unit.category (Types, Brands, Models, Motor Type for Transportation Units) -->
    <menuitem name="Unit Categories" 
              parent="menu_tms_config_unit" 
              id="menu_tms_config_unit_category_form" 
              action="open_view_tms_unit_category_form"/>

<!-- 
##############################
TMS.UNIT
##############################
-->
<!-- SEARCH View for tms.unit (Transportation Units) --> 
        <record id="view_tms_unit_search" model="ir.ui.view">
            <field name="name">tms.unit.search</field>
            <field name="model">tms.unit</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Units">
                   <filter string="Motorized Units" icon="terp-accessories-archiver" domain="[('fleet_type','=','tractor')]"/>
                   <filter string="Trailers" icon="terp-accessories-archiver" domain="[('fleet_type','=','trailer')]"/>
                   <filter string="Dolly's" icon="terp-accessories-archiver" domain="[('fleet_type','=','dolly')]"/>
                   <filter string="Others" icon="terp-accessories-archiver" domain="[('fleet_type','=','other')]"/>
                   <separator orientation="vertical"/>
                   <field name="name"/>
                   <field name="employee_id" />
                   <field name="unit_extradata_ids" />
                   <field name="unit_expiry_ids" />
                   <newline/>
                   <group  expand='0' string='More filters...'> 
                   <field name="company_id"/>
                   <field name="active" />
                   <field name="plates" />
                   </group>
                   <newline/>
                   <group  expand='0' string='Group by...'> <!--groups="base.group_extended" -->
                       <filter string='Fleet Unit Type' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'fleet_type'}" />
                       <separator orientation="vertical"/>                                                                
                       <filter string='Unit Type' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_type_id'}" />
                       <separator orientation="vertical"/>
                       <filter string='Brand' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_brand_id'}" />
                       <separator orientation="vertical"/>
                       <filter string='Model' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_model_id'}" />
                       <separator orientation="vertical"/>
                       <filter string='Motor' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_motor_id'}" />
                   </group>
                </search>
            </field>
        </record>

<!-- TREE View for tms.unit (Transportation Units) --> 
	<record model="ir.ui.view" id="view_tms_unit_tree">
        <field name="name">tms.unit.tree</field>
        <field name="model">tms.unit</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
            <tree string="Units">
                <field name="name" />
                <field name="fleet_type"/>
                <field name="company_id" />
                <field name="active"/>
                <field name="year_model" />
                <field name="unit_type_id" />
                <field name="unit_brand_id" />
                <field name="unit_model_id" />
                <field name="unit_motor_id" />
                <field name="plates" />
                <field name="gps_supplier_id" />
	        <field name="employee_id"/>
		    </tree>
		</field>
	</record>

<!-- FORM View for tms.unit (Transportation Units) -->

        <record id="view_tms_unit_form" model="ir.ui.view">
            <field name="name">tms.unit.form</field>
            <field name="model">tms.unit</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Units" version="7.0">
                    <sheet>
                        <h1>
                            <label string="Unit"/>
                            <field name="name" class="oe_inline"/>
                        </h1>
                        <group col="4">
                            <field name="fleet_type"/>
                            <field name="shop_id" />
					        <field name="supplier_unit"/>
					        <field name="supplier_id" attrs="{'required':[('supplier_unit','=',True)], 'invisible':[('supplier_unit','=',False)]}"/>
                            <field name="active" readonly="1"/>
                        </group>
                        <notebook colspan="4">
                            <page string="General Data">
                                <group col="4">
                                    <field name="year_model" />
                                    <field name="unit_type_id" context="{'default_type':'unit_type'}"/>
                                    <field name="unit_brand_id" context="{'default_type':'brand'}"/>
                                    <field name="unit_model_id" context="{'default_type':'model'}" domain="[('parent_id', '=', unit_brand_id)]"/>
                                    <field name="unit_motor_id" context="{'default_type':'motor'}" />
                                    <field name="serial_number" />
                                    <field name="vin" />
                                    <field name="plates" />
                                    <field name="registration" />
                                    <field name="employee_id" context="{'default_tms_category':'driver'}" domain="[('tms_category', '=', 'driver')]"/>
                                    <field name="day_no_circulation"/>
                                </group>
                            </page>
                            <page string="Extra Data">
                                <group colspan="4" col="4">
                                    <field name="unit_extradata_ids" nolabel="1" widget="one2many_list" >
                                        <tree string="Extra Data" editable="bottom">
                                            <field name="extra_data_id" context="{'default_type':'extra_data'}" />
                                            <field name="extra_value" />
                                        </tree>
                                        <form string="Extra Data">
                                            <group colspan="4">
                                                <field name="extra_data_id" context="{'default_type':'extra_data'}" />
                                                <field name="extra_value" />
                                            </group>
                                        </form>
                                    </field>
                                    <field name="unit_expiry_ids" nolabel="1" >
                                        <tree string="Expiry Data" editable="bottom">
                                            <field name="expiry_id" context="{'default_type':'expiry'}" />
                                            <field name="extra_value" on_change="on_change_extra_value(extra_value)"/>
                                            <field name="name" invisible="1"/>
                                        </tree>
                                        <form string="Extra Data">
                                            <group colspan="4">
                                                <field name="expiry_id" context="{'default_type':'expiry'}" />
                                                <field name="extra_value" />
                                            </group>
                                        </form>
                                    </field>
                                </group>
                            </page>
						    <page string="Images">
                                <field name="unit_photo_ids" nolabel="1" >
								    <tree string="Unit Photos">
									    <field name="name"/>
								    </tree>
								    <form string="Unit Photos">
                                        <group colspan="4">
									        <separator string="Image Description" colspan="4"/>
									        <field name="name" colspan="4" nolabel="1"/>
									        <field name="photo" widget='image' nolabel="1" colspan="4"/>
                                        </group>
								    </form>
							    </field>
                            </page>
                            <page string="GPS">
                                <group col="4">
                                    <field name="gps_supplier_id"/>
                                    <field name="gps_id" attrs="{'required':[('gps_supplier_id','!=',False)]}"/>
                                </group>
                            </page>
                            <page string="Active/Inactive History">
                                <field name="unit_active_history_ids" nolabel="1" />
                            </page>
                            <page string="Red Tapes">
                                <field name="unit_red_tape_ids" nolabel="1" />
                            </page>
                            <page string="Notes">
                                <field name="notes" nolabel="1" />
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread" placeholder="Share a message..."/>
                    </div>
                </form>
            </field>
        </record>

<!-- Action for tms.unit (Transportation Units) -->
    <record model="ir.actions.act_window" id="open_view_tms_unit_form">
        <field name="name">TMS Units</field>
        <field name="res_model">tms.unit</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Menu for tms.unit (Transportation Units) -->
    <menuitem name="Units" 
              parent="menu_tms_config_unit" 
              id="menu_tms_config_unit_form" 
              action="open_view_tms_unit_form"/>

<!-- 
##############################
TMS.UNIT.KIT
##############################
-->
<!-- SEARCH View for tms.unit.kit (Transportation Units Kits) --> 
        <record id="view_tms_unit_kit_search" model="ir.ui.view">
            <field name="name">tms.unit.kit.search</field>
            <field name="model">tms.unit.kit</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Units Kits">
                   <field name="name"/>
                   <field name="active" />
                   <field name="unit_id" />
                   <field name="trailer1_id" />
                   <field name="dolly_id" />
                   <field name="trailer2_id" />
				<newline />
                   <field name="employee_id" />
                   <field name="date_start" />
                   <field name="date_end" />
                   <newline/>
                   <group  expand='0' string='Group by...'> <!--groups="base.group_extended" -->
                       <filter string='Unit' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_id'}" />
                       <filter string='Unit Type' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_type'}" />
                       <separator orientation="vertical"/>                                                                
                       <filter string='Driver' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'employee_id'}" />
                   </group>
                </search>
            </field>
        </record>

<!-- TREE View for tms.unit.kit (Transportation Units Kits) --> 
	<record model="ir.ui.view" id="view_tms_unit_kit_tree">
        <field name="name">tms.unit.kit.tree</field>
        <field name="model">tms.unit.kit</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
            <tree string="Units Kits">
			<field name="name"/>			
			<field name="unit_id" />
			<field name="unit_type" />
			<field name="trailer1_id" />
			<field name="trailer1_type" />
			<field name="dolly_id" />
			<field name="dolly_type" />
			<field name="trailer2_id" />
			<field name="trailer2_type" />
			<field name="employee_id" />
			<field name="date_start" />
			<field name="date_end" />
			<field name="active" />
		    </tree>
		</field>
	</record>

<!-- FORM View for tms.unit.kit (Transportation Units Kits) -->

        <record id="view_tms_unit_kit_form" model="ir.ui.view">
            <field name="name">tms.unit.kit.form</field>
            <field name="model">tms.unit.kit</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Units Kits" version="7.0">
                    <sheet>
                        <h1>
                            <label string="Kit Name"/>
                            <field name="name" class="oe_inline"/>
                        </h1>
					    <group col="4" colspan="4">
                            <separator string="Kit Framework" colspan="4"/> 
						    <field name="unit_id" domain="[('fleet_type', '=', 'tractor')]"/>
						    <field name="unit_type" readonly="1"/>
		                    <field name="trailer1_id" domain="[('id','!=',trailer2_id), ('fleet_type','=','trailer')]" attrs="{'required':['|', ('dolly_id','!=',False),('trailer2_id','!=',False)]}"/>
						    <field name="trailer1_type" readonly="1" />
		                    <field name="dolly_id"  domain="[('fleet_type','=','dolly')]" attrs="{'required':[('trailer2_id','!=',False)]}"/>
						    <field name="dolly_type" readonly="1" />
		                    <field name="trailer2_id" domain="[('id','!=',trailer1_id), ('fleet_type','=','trailer')]" attrs="{'required':[('dolly_id','!=',False)]}"/>
						    <field name="trailer2_type" readonly="1" />
						    <field name="employee_id" colspan="2"/>
						    <newline />
                            <separator string="Validity" colspan="4"/>
						    <field name="date_start" />
						    <field name="date_end"/>
						    <field name="active" on_change="on_change_active(active)"/>
					    </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread" placeholder="Share a message..."/>
                    </div>
                </form>
            </field>
        </record>

<!-- Action for tms.unit (Transportation Units Kits) -->
    <record model="ir.actions.act_window" id="open_view_tms_unit_kit_form">
        <field name="name">TMS Units Kits</field>
        <field name="res_model">tms.unit.kit</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_active': ''}</field>
    </record>

<!-- Menu for tms.unit (Transportation Units Kits) -->
    <menuitem name="Units Kits" 
              parent="menu_tms_config_unit" 
              id="menu_tms_config_unit_kit_form" 
              action="open_view_tms_unit_kit_form"/>

<!-- 
##############################
TMS.PLACE
##############################
-->
<!-- TREE View for tms.place --> 
	<record model="ir.ui.view" id="view_tms_place_tree">
        <field name="name">tms.place.tree</field>
        <field name="model">tms.place</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
            <tree string="Places">
                <field name="name" />
		        <field name="state_id" />
		        <field name="country_id" />
                <field name="latitude"/>
                <field name="longitude"/>
                <field name="company_id" />
		    </tree>
		</field>
	</record>

<!-- FORM View for tms.place -->
    
        <record id="view_tms_place_form" model="ir.ui.view">
            <field name="name">tms.place.form</field>
            <field name="model">tms.place</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Places" version="7.0">
                    <header>
                        <button name="button_get_coords" string="Get Coords from Google" type="object" icon="STOCK_EXECUTE"/>
                        <button name="button_open_google" string="View in Google Maps" type="object" icon="STOCK_EXECUTE"/>
                    </header>
                    <group col="4">
                        <field name="name" select="1" />
                        <field name="company_id" select="1"/> 
                        <field name="state_id" select="1" />
                        <field name="country_id" readonly="1" />
                        <field name="latitude"/>
                        <field name="longitude" />
                    </group>
                </form>
            </field>
        </record>

<!-- Action for tms.place -->
    <record model="ir.actions.act_window" id="open_view_tms_place_form">
        <field name="name">TMS Places</field>
        <field name="res_model">tms.place</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Menu for tms.place -->
    <menuitem name="Places" sequence="1"
              parent="menu_tms_config_routes" 
              id="menu_tms_config_route_place_form" 
              action="open_view_tms_place_form"/>

<!-- 
##############################
TMS.ROUTE
##############################
-->

<!-- SEARCH View for tms.route  --> 
        <record id="view_tms_route_search" model="ir.ui.view">
            <field name="name">tms.route.search</field>
            <field name="model">tms.route</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Routes">
                   <field name="name"/>
                   <field name="company_id" />
                   <field name="departure_id"/>
                   <field name="arrival_id"/>
                   <field name="tms_route_tollstation_ids" />
                   <field name="active" />
                   <newline/>
                   <group  expand='0' string='Group by...'>
                       <filter string='Departure' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'departure_id'}" />
                       <separator orientation="vertical"/>                                                                
                       <filter string='Arrival' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'arrival_id'}" />
                       <separator orientation="vertical"/>                                                                
                       <filter string='Fuel Eff. by Unit' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'fuel_efficiency_drive_unit'}" />
                       <separator orientation="vertical"/>                                                                
                       <filter string='Fuel Eff. 1 Trailer' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'fuel_efficiency_1trailer'}" />
                       <separator orientation="vertical"/>                                                                
                       <filter string='Fuel Eff. 2 Trailer' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'fuel_efficiency_2trailer'}" />
                   </group>
                </search>
            </field>
        </record>

<!-- TREE View for tms.route --> 
	<record model="ir.ui.view" id="view_tms_route_tree">
        <field name="name">tms.route.tree</field>
        <field name="model">tms.route</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
            <tree string="Routes">
                <field name="name" />
		        <field name="departure_id" />
                <field name="arrival_id" />
		        <field name="distance"/>
                <field name="travel_time" widget="float_time"/>
                <field name="company_id" />
		    </tree>
		</field>
	</record>

<!-- FORM View for tms.route -->
        <record id="view_tms_route_form" model="ir.ui.view">
            <field name="name">tms.route.form</field>
            <field name="model">tms.route</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Routes" version="7.0">
                    <header>
                        <button name="button_get_route_info" string="Get Route Info from Google" type="object" icon="STOCK_EXECUTE"/>
                        <button name="button_open_google" string="View in Google Maps" type="object" icon="STOCK_EXECUTE"/>
                    </header>
                    <sheet>
                        <h1>
                            <label string="Route"/>
                            <field name="name" class="oe_inline"/>
                        </h1>
					    <group col="4" colspan="4">
                            <field name="departure_id" />
                            <field name="arrival_id" />
                            <field name="distance" />
                            <field name="travel_time" widget="float_time"/>
                            <field name="active" />
                            <field name="company_id" />
                        </group>
                        <notebook colspan="4">
                            <page string="Intermediate Places">
                                <separator string="Places in this route" colspan="4" />
                                <field name="place_ids" nolabel="1" colspan="4"/>
                            </page>
                            <page string="Fuel Efficiency Expected">
                                <field name="route_fuelefficiency_ids" nolabel="1" >
                                    <tree string="Route Fuel Efficiency Expected" editable="bottom">
                                        <field name="motor_id" widget="selection" domain="[('type','=','motor')]"/>
                                        <field name="type" />
                                        <field name="performance" />
                                    </tree>
                                    <form string="Route Fuel Efficiency Expected">
                                        <field name="motor_id" widget="selection" domain="[('type','=','motor')]"/>
                                        <field name="type" />
                                        <field name="performance" />
                                    </form>
                                </field>
                            </page>
                            <page string="Toll Stations">
                                <field name="tms_route_tollstation_ids"  nolabel="1"/>
                            </page>
                            <page string="Factor Driver">
                                <separator string="Driver Salary Factors" colspan="4"/>
                                <field name="expense_driver_factor" 
                                        context="{'default_route_id': active_id,'default_category':'driver'}" 
                                        domain="[('category','=','driver')]"
                                        colspan="4" nolabel="1"/>
                            </page>

                            <page string="Notes">
                                <field name="notes" nolabel="1"/>                            
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread" placeholder="Share a message..."/>
                    </div>
                </form>
            </field>
        </record>

<!-- Action for tms.route -->
    <record model="ir.actions.act_window" id="open_view_tms_route_form">
        <field name="name">TMS Routes</field>
        <field name="res_model">tms.route</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Menu for tms.route -->
    <menuitem name="Routes" sequence="10"
              parent="menu_tms_config_routes" 
              id="menu_tms_config_route_form" 
              action="open_view_tms_route_form"/>

<!-- 
##############################
TMS.ROUTE.TOLLSTATION
##############################
-->
<!-- TREE View for tms.route.tollstation --> 
	<record model="ir.ui.view" id="view_tms_route_tollstation_tree">
        <field name="name">tms.route.tollstation.tree</field>
        <field name="model">tms.route.tollstation</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
            <tree string="Toll Stations">
                <field name="name" />
		        <field name="place_id" />
                <field name="partner_id" />
		        <field name="credit"/>
                <field name="active"/>
                <field name="company_id" />
		    </tree>
		</field>
	</record>

<!-- FORM View for tms.route.tollstation -->
        <record id="view_tms_route_tollstation_form" model="ir.ui.view">
            <field name="name">tms.route.tollstation.form</field>
            <field name="model">tms.route.tollstation</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Toll Stations">
                    <field name="name" select="1"/>
                    <field name="place_id" select="1"/>
                    <field name="partner_id" select="1"/>
                    <field name="credit" select="1"/>
                    <field name="active" select="1"/>
                    <field name="company_id" />
                    <notebook colspan="4">
                        <page string="Costs per axis">
                            <field name="tms_route_tollstation_costperaxis_ids" > 
                                <tree string="" editable="top">
                                    <field name="unit_type_id" />
                                    <field name="axis" />
                                    <field name="cost_credit" />
                                    <field name="cost_cash" />
                                </tree>
                                <form string="">
                                    <field name="unit_type_id" />
                                    <field name="axis" />
                                    <field name="cost_credit" />
                                    <field name="cost_cash" />
                                </form>
                            </field>
                        </page>
                        <page string="Routes with this Toll Station">
                            <group>
                                <field name="tms_route_ids" nolabel="1" />
                            </group>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

<!-- Action for tms.route.tollstation -->
    <record model="ir.actions.act_window" id="open_view_tms_route_tollstation_form">
        <field name="name">TMS Toll Stations</field>
        <field name="res_model">tms.route.tollstation</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Menu for tms.place -->
    <menuitem name="Toll Stations" sequence="2"
              parent="menu_tms_config_routes" 
              id="menu_tms_config_route_tollstation_form" 
              action="open_view_tms_route_tollstation_form"/>


<!-- 
##############################
TMS.UNIT.ACTIVE_HISTORY
##############################
-->
<!-- SEARCH View for tms.unit.active_history --> 
        <record id="view_tms_unit_active_history_search" model="ir.ui.view">
            <field name="name">tms.unit.active_history.search</field>
            <field name="model">tms.unit.active_history</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Unit Active/Inactive History">
                   <filter string="Motorized Units" icon="terp-accessories-archiver" domain="[('unit_id.fleet_type','=','tractor')]"/>
                   <filter string="Trailers" icon="terp-accessories-archiver" domain="[('unit_id.fleet_type','=','trailer')]"/>
                   <filter string="Dolly's" icon="terp-accessories-archiver" domain="[('unit_id.fleet_type','=','dolly')]"/>
                   <filter string="Others" icon="terp-accessories-archiver" domain="[('unit_id.fleet_type','=','other')]"/>
                   <separator orientation="vertical"/>
                   <field name="unit_id"/>
                   <field name="date" />
                   <field name="state_cause_id" />
                   <field name="prev_state" />
                   <field name="new_state" />
                   <newline/>
                   <group  expand='0' string='More filters...'> 
                   <field name="confirmed_by"/>
                   <field name="name" />
                   </group>
                   <newline/>
                   <group  expand='0' string='Group by...'> 
                       <filter string='Unit' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_id'}" />
                       <filter string='Unit Type' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_type_id'}" />
                       <separator orientation="vertical"/>                                                                
                       <filter string='Cause' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'state_cause_id'}" />
                       <separator orientation="vertical"/>
                       <filter string='Date' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'date'}" />
                       <separator orientation="vertical"/>
                       <filter string='Previous State' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'prev_state'}" />
                       <filter string='New State' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'new_state'}" />
                   </group>
                </search>
            </field>
        </record>

<!-- TREE View for tms.unit.active_history --> 
	<record model="ir.ui.view" id="view_tms_unit_active_history_tree">
        <field name="name">tms.unit.active_history.tree</field>
        <field name="model">tms.unit.active_history</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
            <tree string="Units Active/Inactive History">
                <field name="state"/>
                <field name="date"/>
                <field name="unit_id" />
                <field name="unit_type_id" invisible="1"/>
                <field name="prev_state" />
                <field name="new_state" />
                <field name="state_cause_id" />
                <field name="name" />
                <field name="create_uid" />
                <field name="confirmed_by" />
		    </tree>
		</field>
	</record>

<!-- FORM View for tms.unit.active_history -->

        <record id="view_tms_unit_active_history_form" model="ir.ui.view">
            <field name="name">tms.unit.active_history.form</field>
            <field name="model">tms.unit.active_history</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Units Active/Inactive History" version="7.0">
                    <header>
                        <button name="action_cancel" states="draft" string="Cancel" type="object"/>
                        <button name="action_confirm" states="draft" string="Confirm" type="object" icon="gtk-ok"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,cancel"/>
                    </header>
                    <sheet>
                        <h1>
                            <label string="Activation / Inactivation Record"/>
                        </h1>
                        <group col="4">
                            <field name="date"/>
                            <newline />
                            <field name="unit_id" on_change="on_change_unit_id(unit_id)"/>
                            <field name="unit_type_id"/>
                            <field name="prev_state"/>
                            <field name="new_state"/>
                            <field name="state_cause_id" context="{'default_type':'active_cause'}" on_change="on_change_state_cause_id(state_cause_id)"/>
                            <newline />
                            <field name="name" colspan="4"/>
                        </group>
                        <notebook colspan="6">
                            <page string="Notes">
                                <field name="notes" nolabel="1" />
                            </page>
                            <page string="Log">
                                <group col="4">
                                    <field name="create_uid" readonly="1" />
                                    <field name="create_date" readonly="1" />
                                    <field name="confirmed_by" readonly="1" />
                                    <field name="date_confirmed" readonly="1" />
                                    <field name="cancelled_by" readonly="1" />
                                    <field name="date_cancelled" readonly="1" />
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread" placeholder="Share a message..."/>
                    </div>
                </form>
            </field>
        </record>

<!-- Action for tms.unit.active_history -->
    <record model="ir.actions.act_window" id="open_view_tms_unit_active_history_form">
        <field name="name">Active/Inactivate Units</field>
        <field name="res_model">tms.unit.active_history</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Menu for tms.unit.active_history -->
    <menuitem name="Activate/Inactivate Units" 
              parent="menu_tms_config_unit" 
              id="menu_tms_config_unit_active_history_form" 
              action="open_view_tms_unit_active_history_form"/>

<!-- 
##############################
TMS.UNIT.red_tape
##############################
-->
<!-- SEARCH View for tms.unit.red_tape --> 
        <record id="view_tms_unit_red_tape_search" model="ir.ui.view">
            <field name="name">tms.unit.red_tape.search</field>
            <field name="model">tms.unit.red_tape</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Unit Red Tapes">
                   <filter string="Motorized Units" icon="terp-accessories-archiver" domain="[('unit_id.fleet_type','=','tractor')]"/>
                   <filter string="Trailers" icon="terp-accessories-archiver" domain="[('unit_id.fleet_type','=','trailer')]"/>
                   <filter string="Dolly's" icon="terp-accessories-archiver" domain="[('unit_id.fleet_type','=','dolly')]"/>
                   <filter string="Others" icon="terp-accessories-archiver" domain="[('unit_id.fleet_type','=','other')]"/>
                   <separator orientation="vertical"/>
                   <field name="unit_id"/>
                   <field name="date" />
                   <field name="red_tape_id" />
                   <field name="name" />
                   <newline/>
                   <group  expand='0' string='Group by...'>
                       <filter string='State' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'state'}" />
                       <filter string='Unit' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_id'}" />
                       <filter string='Unit Type' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'unit_type_id'}" />
                       <separator orientation="vertical"/>                                                                
                       <filter string='Red Tape' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'red_tape_id'}" />
                       <separator orientation="vertical"/>
                       <filter string='Date' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'date'}" />
                   </group>
                </search>
            </field>
        </record>

<!-- TREE View for tms.unit.red_tape --> 
	<record model="ir.ui.view" id="view_tms_unit_red_tape_tree">
        <field name="name">tms.unit.red_tape.tree</field>
        <field name="model">tms.unit.red_tape</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
            <tree string="Unit Red Tapes">
                <field name="state"/>
                <field name="date"/>
                <field name="unit_id" />
                <field name="unit_type_id" invisible="1"/>
                <field name="red_tape_id" />
                <field name="partner_id" />
                <field name="amount" sum="Amount"/>
                <field name="amount_paid" sum="Amount Paid"/>
		    </tree>
		</field>
	</record>

<!-- FORM View for tms.unit.active_history -->

        <record id="view_tms_unit_red_tape_form" model="ir.ui.view">
            <field name="name">tms.unit.red_tape.form</field>
            <field name="model">tms.unit.red_tape</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Units Red Tapes" version="7.0">
                    <header>
                        <button name="action_cancel" states="draft" string="Cancel" type="object"/>
                        <button name="action_pending" states="draft" string="Pending" type="object" icon="gtk-media-pause"/>
                        <button name="action_progress" states="pending" string="Progress" type="object" icon="gtk-go-forward"/>
                        <button name="action_done" states="progress" string="Done" type="object" icon="gtk-goto-last"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,pending,progress,done,cancel"/>
                    </header>
                    <sheet>
                        <h1>
                            <label string="Red Label Record"/>
                        </h1>
                        <group col="4">
                            <field name="date"/>
                            <newline />
                            <field name="unit_id" />
                            <field name="unit_type_id"/>
                            <field name="red_tape_id" context="{'default_type':'red_tape'}" on_change="on_change_red_tape_id(red_tape_id)"/>
                            <field name="partner_id"/>
                            <field name="name" colspan="4"/>
                            <field name="date_start"/>
                            <field name="date_end"/>
                            <field name="amount"/>
                            <field name="amount_paid"/>
                        </group>
                        <notebook colspan="6">
                            <page string="Notes">
                                <field name="notes" nolabel="1" />
                            </page>
                            <page string="Log">
                                <group col="4">
                                    <field name="create_uid" readonly="1" />
                                    <field name="create_date" readonly="1" />
                                    <field name="pending_by" readonly="1" />
                                    <field name="date_pending" readonly="1" />
                                    <field name="progress_by" readonly="1" />
                                    <field name="date_progress" readonly="1" />
                                    <field name="done_by" readonly="1" />
                                    <field name="date_done" readonly="1" />
                                    <field name="cancelled_by" readonly="1" />
                                    <field name="date_cancelled" readonly="1" />
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread" placeholder="Share a message..."/>
                    </div>
                </form>
            </field>
        </record>

<!-- Action for tms.unit.red_tape -->
    <record model="ir.actions.act_window" id="open_view_tms_unit_red_tape_form">
        <field name="name">Unit Red Tapes</field>
        <field name="res_model">tms.unit.red_tape</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Menu for tms.unit.red_tape -->
    <menuitem name="Unit Red Tapes" 
              parent="menu_tms_config_unit" 
              id="menu_tms_config_unit_red_tape_form" 
              action="open_view_tms_unit_red_tape_form"/>


</data>
</openerp>


