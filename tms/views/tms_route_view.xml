<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        
<!-- 
##############################
TMS.ROUTE
##############################
-->

<!-- SEARCH View for tms.route  --> 
        <record id="view_tms_route_search" model="ir.ui.view">
          <field name="name">tms.route.search</field>
          <field name="model">tms.route</field>
          <field name="arch" type="xml">
            <search string="Routes">
              <field name="name"/>
              <field name="company_id" />
              <field name="departure_id"/>
              <field name="arrival_id"/>
              <field name="tms_route_tollstation_ids" />
              <field name="active" />
              <newline/>
              <group  expand='0' string='Group by...'>
                <filter string='Departure' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'departure_id'}" />
                <separator orientation="vertical"/>                                                                
                <filter string='Arrival' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'arrival_id'}" />
                <separator orientation="vertical"/>                                                                
                <filter string='Fuel Eff. by Unit' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'fuel_efficiency_drive_unit'}" />
                <separator orientation="vertical"/>                                                                
                <filter string='Fuel Eff. 1 Trailer' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'fuel_efficiency_1trailer'}" />
                <separator orientation="vertical"/>                                                                
                <filter string='Fuel Eff. 2 Trailer' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'fuel_efficiency_2trailer'}" />
              </group>
            </search>
          </field>
        </record>

<!-- TREE View for tms.route --> 
  <record model="ir.ui.view" id="view_tms_route_tree">
          <field name="name">tms.route.tree</field>
          <field name="model">tms.route</field>
    <field name="arch" type="xml">
            <tree string="Routes">
              <field name="name" />
        <field name="departure_id" />
              <field name="arrival_id" />
        <field name="distance"/>
              <field name="travel_time" widget="float_time"/>
              <field name="company_id" />
      </tree>
    </field>
  </record>

<!-- FORM View for tms.route -->
        <record id="view_tms_route_form" model="ir.ui.view">
          <field name="name">tms.route.form</field>
          <field name="model">tms.route</field>
          <field name="arch" type="xml">
            <form string="Routes" version="7.0">
              <header>
                <button name="button_get_route_info" string="Get Route Info from Google" type="object" icon="STOCK_EXECUTE"/>
                <button name="button_open_google" string="View in Google Maps" type="object" icon="STOCK_EXECUTE"/>
              </header>
              <sheet>
    <group col="4" colspan="4">
                  <h1>
                    <field name="name" colspan="4"/>
                  </h1>
    </group>
    <group col="4" colspan="4">
                  <field name="departure_id" />
                  <field name="arrival_id" />
                  <field name="distance" />
                  <field name="travel_time" widget="float_time"/>
                  <field name="active" />
                  <field name="company_id" />
                </group>
                <notebook colspan="4">
                  <page string="Intermediate Places">
                    <separator string="Places in this route" colspan="4" />
                    <field name="places_ids" nolabel="1" colspan="4">
                      <tree string="Intermediate places in this route" editable="bottom">
                        <field name="sequence"/>
                        <field name="place_id" />
                        <field name="state_id" />
                        <field name="country_id" />
                      </tree>
                    </field>
                  </page>
                  <page string="Fuel Efficiency Expected">
                    <field name="route_fuelefficiency_ids" nolabel="1" >
                      <tree string="Route Fuel Efficiency Expected" editable="bottom">
                        <field name="motor_id" widget="selection" domain="[('type','=','motor')]"/>
                        <field name="type" />
                        <field name="performance" />
                      </tree>
                      <form string="Route Fuel Efficiency Expected">
                        <field name="motor_id" widget="selection" domain="[('type','=','motor')]"/>
                        <field name="type" />
                        <field name="performance" />
                      </form>
                    </field>
                  </page>
                  <page string="Toll Stations">
                    <field name="tms_route_tollstation_ids"  nolabel="1"/>
                  </page>
                  <page string="Factor Driver">
                    <separator string="Driver Salary Factors" colspan="4"/>
                    <field name="expense_driver_factor" 
                           context="{'default_route_id': active_id,'default_category':'driver'}" 
                           domain="[('category','=','driver')]"
                           colspan="4" nolabel="1"/>
                  </page>
      
                  <page string="Notes">
                    <field name="notes" nolabel="1"/>                            
                  </page>
                </notebook>
              </sheet>
              <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="message_ids" widget="mail_thread" placeholder="Share a message..."/>
              </div>
            </form>
          </field>
        </record>

<!-- Action for tms.route -->
    <record model="ir.actions.act_window" id="open_view_tms_route_form">
        <field name="name">TMS Routes</field>
        <field name="res_model">tms.route</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Menu for tms.route -->
    <menuitem name="Routes" sequence="10"
              parent="menu_tms_config_routes" 
              id="menu_tms_config_route_form" 
              action="open_view_tms_route_form"/>

    </data>
</openerp>